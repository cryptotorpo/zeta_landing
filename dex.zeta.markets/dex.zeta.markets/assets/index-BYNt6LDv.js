import{j as e,r as y,s as d,J as T}from"./assets-Bn59xubp.js";import{aO as D,aP as I,T as p,aQ as M,aR as N,aS as P,aT as f,y as k,z as O,G as R,aU as z,aV as _,aW as E,P as U,aX as V,aY as F,aZ as S,a_ as C,a$ as L,b0 as W,b1 as G,b2 as H,b3 as J,w as j,b4 as Y,b5 as Z,b6 as B,b7 as Q,b8 as X,b9 as $,ba as q,bb as K,bc as ee,bd as te,be as se,ab as ae,bf as ne,bg as oe,bh as re,bi as ie,J as de,A as ce,a as le,bj as pe,bk as g,bl as u}from"./index-BhO6kFRl.js";import"./__commonjsHelpers__-DZ6wOnC1.js";import{P as xe}from"./PositionAccordion-DH8fXXGI.js";import"./AnimatedDropdownArrow-CeiGlLqq.js";import"./Accordion-C2T9oJ2F.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i=new Error().stack;i&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[i]="2cafb89d-3874-464e-9aea-7b27c622fd0a",t._sentryDebugIdIdentifier="sentry-dbid-2cafb89d-3874-464e-9aea-7b27c622fd0a")}catch{}})();const be=()=>e.jsxs(D,{children:[e.jsx(I,{children:e.jsx(p,{variant:"h4",color:"highlight",children:"Select a market"})}),e.jsxs(M,{children:[e.jsx(N,{children:e.jsx(p,{variant:"label",color:"secondary",children:"Market"})}),e.jsx(P,{children:e.jsx(p,{variant:"label",color:"secondary",children:"Price"})})]})]}),he=({assetDropdownOption:t,onSelect:i})=>{var x;const n=((x=t.data)==null?void 0:x.asset)??f.Asset.UNDEFINED,o=k(b=>b.prices[n]),r=O(n),m=R(n,o,{includeDollarSign:!0});return e.jsxs(z,{disabled:!1,onSelect:i,children:[e.jsx(_,{selectedAsset:n,textVariant:"body2"}),e.jsxs(E,{children:[e.jsx(p,{variant:"caption",color:"primary",children:m}),e.jsx(U,{variant:"label",deltaPercentage:r==null?void 0:r.percentage,removeIcon:!0})]})]})},w=V.map(t=>({label:e.jsx(F,{asset:t.asset,inHistory:!0}),value:t.asset,data:{asset:t.asset,showNewLabelUntil:t.showNewLabelUntil??0,volume24h:0}})),me=({className:t})=>{var b;const i=S(),n=C(s=>s.setAsset),{favoriteMarkets:o}=L(({favoriteMarkets:s})=>({favoriteMarkets:s})),r=W(),m=((b=w.find(s=>{var a;return((a=s.data)==null?void 0:a.asset)===i}))==null?void 0:b.data)??w[0].data,x=y.useMemo(()=>{const s=a=>{var l;return(l=r==null?void 0:r.components)==null?void 0:l.find(c=>{var h;return(c==null?void 0:c.asset)===((h=a.data)==null?void 0:h.asset)})};return w.sort((a,l)=>{const c=s(a),h=s(l),A={...a.data,volume24h:(c==null?void 0:c.volume)??0},v={...l.data,volume24h:(h==null?void 0:h.volume)??0};return G(A,v,o,void 0)})},[o,r==null?void 0:r.components]);return e.jsx(H,{children:e.jsx(J,{options:x,data:m,onOpenChange:s=>{s&&j.openMarketSelector()},header:e.jsx(be,{}),renderDrawerValue:s=>e.jsx(he,{assetDropdownOption:s,onSelect:()=>{var a;(a=s.data)!=null&&a.asset&&(n(s.data.asset),j.selectMarket(s.data.asset))}}),className:t})})},ge=d.div.withConfig({displayName:"Row",componentId:"sc-cklk17-0"})(["display:flex;flex-direction:row;align-items:center;"]),ue=d(ge).withConfig({displayName:"SpacedRow",componentId:"sc-cklk17-1"})(["box-sizing:border-box;gap:8px;padding:0px 8px 16px 8px;"]),we=d(Z).withConfig({displayName:"StyledAssetMetrics",componentId:"sc-cklk17-2"})(["background-color:",";width:fit-content;overflow-x:auto;","{gap:0px;}"],({theme:t})=>t.background[400],Y),ye=()=>e.jsxs(ue,{children:[e.jsx(me,{}),e.jsx(we,{})]}),fe=d.div.withConfig({displayName:"Container",componentId:"sc-1j1pann-0"})(["display:flex;flex-direction:column;width:100%;height:100%;background-color:",";box-sizing:border-box;padding:8px;padding-top:0px;"],({theme:t})=>t.background[400]),Se=d($).withConfig({displayName:"StyledOrderForm",componentId:"sc-1j1pann-1"})(["border-radius:12px;"]),je=d(q).withConfig({displayName:"StyledClientAccountSummary",componentId:"sc-1j1pann-2"})(["margin-top:8px;margin-bottom:8px;border-radius:12px;background:",";border:none;height:fit-content;"],({theme:t})=>t.background[300]),ke=d(K).withConfig({displayName:"StyledTradingViewChart",componentId:"sc-1j1pann-3"})(["width:100%;min-height:max(40vh,330px);box-sizing:border-box;margin-top:4px;margin-bottom:16px;"]),Ce=d.div.withConfig({displayName:"UserPositionAccordionWrapper",componentId:"sc-1j1pann-4"})(["box-sizing:border-box;padding-bottom:8px;"]),Ae=d(ee).withConfig({displayName:"StyledOrderbook",componentId:"sc-1j1pann-5"})(["width:100%;min-height:max(40vh,330px);box-sizing:border-box;margin-top:4px;margin-bottom:16px;background:",";","{min-height:16px;","{font-size:9px;font-weight:400;line-height:16px;}}","{padding:0px 8px 0px 8px;","{font-size:9px;font-weight:400;line-height:16px;}svg{height:8px;width:8px;}}"],({theme:t})=>t.background[400],B,p,Q,p),ve=d(te).withConfig({displayName:"StyledRecentTrades",componentId:"sc-1j1pann-6"})(["background:",";margin-top:4px;margin-bottom:16px;box-sizing:border-box;min-height:max(40vh,330px);","{padding:1px 8px 0px 8px;","{font-size:9px;font-weight:400;line-height:16px;}}"],({theme:t})=>t.background[400],X,p),Te=()=>{const t=se(),i=S(),n=t.find(o=>o.asset===i);return n?e.jsx(xe,{position:n}):null};function De(){var l;const[t,i]=y.useState(0),n=T(),o=S(),r=k.getState().prices[o],m=C(c=>c.reduceOnly),x=((l=ae.getState().positions[o])==null?void 0:l.size)??0,b=ne(x),s=oe({asset:o,price:r,reduceOnly:m,side:b},1e3),a=re();return y.useEffect(()=>{o===f.Asset.DYM&&Date.now()>=ie&&a({pathname:de(f.Asset.SOL),search:window.location.search,hash:window.location.hash},{replace:!0})},[o,a]),e.jsx(ce,{eventType:le.ViewTradePage,children:e.jsxs(fe,{children:[e.jsx(ye,{}),e.jsxs(pe,{selected:t,onSelect:i,children:[e.jsx(g,{label:"Chart",value:0}),e.jsx(g,{label:"Orderbook",value:1}),e.jsx(g,{label:"Recent Trades",value:2}),e.jsx(u,{value:0,children:e.jsx(ke,{custom_css_url:"/charting_library/mobile_themed.css",chartBackground:n.background[400]})}),e.jsx(u,{value:1,children:e.jsx(Ae,{})}),e.jsx(u,{value:2,children:e.jsx(ve,{})})]}),e.jsx(Se,{}),e.jsx(je,{maxTradeSize:(s==null?void 0:s.maxTradeSize)??0}),e.jsx(Ce,{children:e.jsx(Te,{})})]})})}De.displayName="Trade";export{De as Component};
//# sourceMappingURL=index-BYNt6LDv.js.map
